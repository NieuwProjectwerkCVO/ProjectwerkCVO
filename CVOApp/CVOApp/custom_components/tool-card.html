<link rel="import" href="../bower_components/polymer/polymer.html" />
<link rel="import" href="../bower_components/core-elements/core-elements.html" />
<link rel="import" href="../bower_components/paper-elements/paper-elements.html" />
<link rel="import" href="../bower_components/core-ajax/core-ajax.html" />

<polymer-element name="tool-card" attributes="url">

    <template>
        <style>
            core-toolbar {
                font-family: RobotoDraft;
                background-color: black;
                color: white;
            }

            core-header-panel {

            }
        </style>
        <core-header-panel flex mode="waterfall-tall">
            <core-toolbar>
                <core-icon-button icon="menu"></core-icon-button>
                <core-icon-button icon="search"></core-icon-button>
                <span flex> CVO APP </span>
                <paper-fab icon="send"></paper-fab>
            </core-toolbar>
        </core-header-panel>

        <core-ajax id="tool_submit"
                   url="{{url}}"
                   params='[{ "username": "{{username}}" }, { "password": "{{password}}"}]'
                   response="{{people}}"
                   method="POST"
                   handleas="json">
        </core-ajax>
    </template>

    <script>

        Polymer('tool-card', {
            success: function (response) {
                console.log("data!");
                alert(this.response);
            },
            register: function () {
                this.$.ajaxSubmit.go();
                console.log("button works!");
            },
            responseChanged: function (oldValue) {
                console.log("data!");
                console.log(this.response);
            },
            error: function (xhr, ajaxOptions, thrownError) {
                alert(xhr.status);
                alert(xhr.responseText);
                alert(thrownError);
            }
        });
    </script>
</polymer-element>

